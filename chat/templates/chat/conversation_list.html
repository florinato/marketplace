<!-- chat/templates/chat/conversation_list.html -->
{% extends "base.html" %}
{% block content %}
<div class="container mx-auto">
    <h2 class="text-2xl font-bold mb-4">Conversaciones</h2>

    <!-- Conversaciones normales -->
    <h3 class="text-xl font-semibold mt-6 mb-2">Conversaciones normales</h3>
    {% if normal_conversations %}
        <ul class="list-disc pl-4">
            {% for item in normal_conversations %}
                <li>
                    <a href="{% url 'chat:conversation_detail' item.conversation.pk %}" class="text-blue-500 hover:underline">
                        {{ item.conversation.product.title }}
                    </a>
                    <span class="text-sm text-gray-500">
                        {% if item.unread_count > 0 %}
                            ({{ item.unread_count }} mensajes nuevos)
                        {% endif %}
                    </span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-gray-500">No tienes conversaciones normales.</p>
    {% endif %}

    <!-- Conversaciones de administrador -->
    <h3 class="text-xl font-semibold mt-6 mb-2">Conversaciones de Administrador</h3>
    {% if admin_conversations %}
        <ul class="list-disc pl-4">
            {% for item in admin_conversations %}
                <li>
                    <a href="{% url 'chat:conversation_detail' item.conversation.pk %}" class="text-blue-500 hover:underline">
                        Conversaci√≥n con {{ item.conversation.participants.exclude(id=request.user.id).first.username }}
                    </a>
                    <span class="text-sm text-gray-500">
                        {% if item.unread_count > 0 %}
                            ({{ item.unread_count }} mensajes nuevos)
                        {% endif %}
                    </span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-gray-500">No tienes conversaciones de administrador.</p>
    {% endif %}
</div>
{% endblock %}

